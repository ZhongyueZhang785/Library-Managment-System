use library_zzy;
DROP TABLE IF EXISTS `borrow`;
CREATE TABLE `borrow` (
  `ano` char(7),
  `cno` char(7) COLLATE utf8_unicode_ci NOT NULL,
  `bno` char(8) COLLATE utf8_unicode_ci NOT NULL,
  `borrow_time` date NOT NULL,
  `return_time` date DEFAULT NULL,
  `return_deadline` date,
  PRIMARY KEY (`cno`,`bno`,`borrow_time`),
  FOREIGN KEY(`cno`) REFERENCES card(`cno`) 
  ON DELETE CASCADE
  ON UPDATE CASCADE,
  FOREIGN KEY(`bno`) REFERENCES book(`bno`) 
  ON DELETE CASCADE
  ON UPDATE CASCADE,
  FOREIGN KEY(`ano`) REFERENCES administrator(`ano`) 
  ON DELETE SET NULL
  ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `borrow` VALUES ('0000001','1000001','20200001','2020-05-26','2020-05-26',NULL);
INSERT INTO `borrow` VALUES
('0000001','1000001','20200030','2020-08-26',NULL,NULL),
('0000001','1000001','20203001','2020-07-12',NULL,NULL),
('0000001','2000005','20200001','2020-02-02','2020-03-22',NULL),
('0000002','6000218','20200304','2020-02-16',NULL,NULL),
('0000002','6000324','20200304','2020-06-02','2020-06-03',NULL),
('0000002','6000324','20203001','2020-01-25',NULL,NULL),
('0000002','7000302','20200304','2020-05-26',NULL,NULL);
